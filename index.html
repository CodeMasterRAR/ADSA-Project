<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Frank+Ruhl+Libre:wght@300..900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <title>ADSA</title>
    <style>
        .font-poppins {
            font-family: 'Poppins', sans-serif;
        }

        .dragColor {
            background-color : #8094dc;
        }

        .custom-border {
        border-color: #8094dc !important;
    }
    </style>
</head>
<body>
    <main class="flex h-full bg-gray-100">
        <!--Left side navbar-->
        <div class="flex flex-col w-[250px] border-black h-full mt-4 rounded-sm ml-5">
            <div class="border-black h-[300px] font-Poppins flex flex-col items-center justify-center mb-5 bg-white rounded-sm shadow-xl">
                <div class="w-16 h-16 bg-gray-400 rounded-full overflow-hidden">
                    <img src="{{ url_for('static', filename='avatar.jpg') }}" alt="avatar" class="w-full h-full object-cover">
                </div>
                
                <div class="font-poppins pt-5 font-semibold">UserName</div>
                <div class="font-poppins">username@gmail.com</div>
            </div>
            <div class="border-black h-[600px] flex flex-col pt-12 pb-8 rounded-sm bg-white shadow-xl">
                <div class="flex ml-4 font-poppins text-sm mb-9"><img class= "mr-2" width="20" height="20" src="https://img.icons8.com/material-rounded/24/dashboard-layout.png" alt="dashboard-layout"/>Home</div>
                <div class="flex ml-4 font-poppins text-sm mb-9"><img class="mr-2" width="20" height="20" src="https://img.icons8.com/material-outlined/24/file.png" alt="file"/>All Files</div>
                <div class="flex ml-4 font-poppins text-sm mb-9"><img class="mr-2" width="20" height="20" src="https://img.icons8.com/material-outlined/24/star--v2.png" alt="star--v2"/>Starred</div>
                <div class="flex ml-4 font-poppins text-sm mb-9"><img class="mr-2"width="20" height="20" src="https://img.icons8.com/material-outlined/24/settings--v1.png" alt="settings--v1"/>Setting</div>
                <div class="flex ml-4 font-poppins text-sm mb-9"><img class="mr-2" width="20" height="20" src="https://img.icons8.com/material-outlined/24/open-pane.png" alt="open-pane"/>Log Out</div>
            </div>
        </div>

        <!--Middle part-->
        <div class="flex flex-col w-[700px] border-black h-full ml-8 mr-8 mt-4 rounded-sm">
            <div class="border-black h-[400px] rounded-sm bg-white mb-4 shadow-xl">
                <!--Heading-->
                <div class="flex justify-between mb-3">
                    <div class="font-poppins pl-4 pt-3 font-medium">Plagiarism Checker</div>
                    <div class="pr-4 pt-2"><img width="25" height="25" src="https://img.icons8.com/ios/50/ellipsis.png" alt="ellipsis"/></div>
                </div>
                <!--Main dragdrop-->
                <div class="pl-4 pr-4">
                    <div id="dropzone" class="border-2 border-dashed custom-border bg-blue-50 p-6 rounded-lg flex flex-col items-center justify-center text-center cursor-pointer h-[260px]">
                        <div><img width="50" height="50" src="https://img.icons8.com/ios/50/upload-to-cloud.png" alt="upload-to-cloud"/></div>
                        <p class="text-sm text-[#8094dc] font-poppins mt-4 mb-3 w-[180px]">Drag your files here, file size less than 15 MB or</p>
            
                        <!-- File Input -->
                        <input type="file" id="fileInput1" class="w-[400px] h-[170px] border-2 border black absolute hidden" accept=".py">
                        <input type="file" id="fileInput2" class="w-[400px] h-[170px] border-2 border black absolute hidden" accept=".py">
                        <button id="browseBtn1" class="mt-3 dragColor font-poppins w-[140px] rounded-sm h-[34px] text-white cursor-pointer">Browse File1</button>
                        <button id="browseBtn2" class="mt-3 dragColor font-poppins w-[140px] rounded-sm h-[34px] text-white cursor-pointer">Browse File2</button>

                    </div>
                </div>

            </div>
            <!--Lower middle part-->
            <div id="lowerDiv" class="border-black h-[300px] rounded-sm bg-white shadow-xl flex">
                <div id ="div1" class="border-black h-[270px] m-3 w-[200px] flex flex-col items-center justify-center hidden shadow-xl">
                    <div class="h-[210px] w-[170px] border-black flex items-center justify-center shadow-xl">
                        <img src="{{ url_for('static', filename='python.png') }}" alt="py" class="w-[100px] h-[100px] rounded-sm">
                    </div>
                </div>
                <div id="div2" class="border-black h-[270px] m-3 w-[200px] flex flex-col items-center justify-center hidden shadow-xl">
                    <div class="h-[210px] w-[170px] border-black flex items-center justify-center shadow-xl">
                        <img src="{{ url_for('static', filename='python.png') }}" alt="py" class="w-[100px] h-[100px] rounded-sm">
                    </div>
                </div>
                <div id ="compareBtn" class="flex items-center justify-center ml-[45px] hidden">
                <button class="font-poppins dragColor h-[30px] rounded-sm text-white text-sm w-[90px]">Compare</button>
                </div>
                <div id="resultDiv" class="w-full flex flex-col items-center justify-center">
                    <div id="sim" class="font-poppins text-[50px] font-bold hidden">Similarity Score</div>
                    <div id="score" class="font-poppins text-[30px] text-[#8094dc]"></div>
                </div>
            </div>
        </div>

        <!--Last Part-->
        <div class="flex flex-col w-[290px] border-black h-full mt-4 rounded-sm shadow-xl">
            <div class="h-full flex flex-col bg-white rounded-sm">
            <div class="flex justify-between mb-6">
                <div class="font-poppins font-medium pl-3 pt-3">History</div>
                <div class="pr-4 pt-3"><img width="25" height="25" src="https://img.icons8.com/ios/50/ellipsis.png" alt="ellipsis"/></div>
            </div>
            <div class="border-black h-[65px] mb-4 mx-3 rounded-sm bg-gray-100 flex">
                <div class="py-3 pl-2"><img width="40" height="40" src="https://img.icons8.com/def904/wired/64/doc.png" alt="doc"/></div>
                <div class="flex flex-col pl-8 pt-3">
                    <div class="font-poppins text-sm">TestFile.pdf</div>
                    <div class="font-poppins text-gray-500 text-sm">2.1 MB</div>
                </div>
            </div>
            <div class="border-black h-[65px] mb-4 mx-3 rounded-sm bg-gray-100"></div>
            <div class="border-black h-[65px] mb-4 mx-3 rounded-sm bg-gray-100"></div>
            <div class="border-black h-[65px] mb-4 mx-3 rounded-sm bg-gray-100"></div>
            <div class="border-black h-[65px] mb-4 mx-3 rounded-sm bg-gray-100"></div>
            <div class="border-black h-[65px] mb-4 mx-3 rounded-sm bg-gray-100"></div>


            </div>

        </div>
    </main>
</body>
</html>

<script>

    let compare = 0;

    function updateCompareButton() {
        if (compare === 2) {
            document.getElementById('compareBtn').classList.remove('hidden');
        }
    }

    const button1 = document.getElementById('browseBtn1');
    button1.addEventListener('click', () => {
        let input1 = document.getElementById('fileInput1');
        input1.click();

        input1.addEventListener('change', () => {
            if (input1.files.length > 0) {
                let fileName = input1.files[0].name;
                let lowerDiv = document.getElementById("div1");
                lowerDiv.classList.remove('hidden')
                lowerDiv.innerHTML += `<p class="font-poppins text-sm p-2">${fileName}</p>`;
                compare += 1;
                updateCompareButton();
            }
        });
    });


    const button2 = document.getElementById('browseBtn2');
    button2.addEventListener('click', () => {
        let input2 = document.getElementById('fileInput2');
        input2.click();

        input2.addEventListener('change', () => {
            if (input2.files.length > 0) {
                let fileName = input2.files[0].name;
                let lowerDiv = document.getElementById("div2");
                lowerDiv.classList.remove('hidden')
                lowerDiv.innerHTML += `<p class="font-poppins text-sm p-2">${fileName}</p>`;
                compare += 1;
                updateCompareButton();
            }
        });
    });

    document.getElementById('compareBtn').addEventListener('click', () => {
    let fileInput1 = document.getElementById('fileInput1').files[0];
    let fileInput2 = document.getElementById('fileInput2').files[0];

    let formData = new FormData();
    formData.append('file1', fileInput1);
    formData.append('file2', fileInput2);

            fetch("/compare-files", {
                method: "POST",
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                if (data.error) {
                    document.getElementById("div1").classList.add('hidden')
                    document.getElementById("div2").classList.add('hidden')
                    document.getElementById("compareBtn").classList.add('hidden')
                    document.getElementById("sim").classList.remove('hidden')

                    document.getElementById("score").innerHTML = "Error: " + data.error;
                } else {
                    document.getElementById("div1").classList.add('hidden')
                    document.getElementById("div2").classList.add('hidden')
                    document.getElementById("compareBtn").classList.add('hidden')
                    document.getElementById("sim").classList.remove('hidden')
                    document.getElementById("score").innerHTML = data.result + "%";
                }
            })
            .catch(error => {
                console.error("Error:", error);
                document.getElementById("test").innerHTML = "An error occurred.";
            });
    }
    );
    





</script>